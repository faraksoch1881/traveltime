<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="css/image-zoom.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


  
    <title>Seismic Waves-Sagar Rawal</title>
    <style>
 body {
    margin: 15px;
    padding: 15px;
}


.container {
    margin-top: 15px;
    display: flex;
    height: 80%;
    width: 100%;
}

.sidenav {
 
    width: 40%; /* Set width to 40% */
    padding: 20px;
    flex: 0 0 auto; /* Prevent it from growing */
    display: flex;
    flex-direction: column; /* Stack children vertically */
}

.bgrnd {

    width: 60%; /* Set width to 60% */
    padding: 20px;
    flex: 1; /* Allow bgrnd to grow and fill available height */
    display: flex;
    flex-direction: column; /* Stack children vertically */
    align-items: center; /* Center items horizontally */
}

.image-box {
    margin-right: 10px;
    margin-bottom: 10px;
}

img {
    max-width: 100%; /* Image will scale to fit the width of its container */
    height: auto; /* Ensure the height scales proportionally */
    border: 1px solid #ccc;
    border-radius: 5px;
}

#imageContainer {
    margin-top: 20px;
    display: flex;
    flex-wrap: wrap;
    border: 1px solid #ccc;
    position: relative; /* Necessary for positioning the moveable box */
    z-index: 1; /* Ensure the image container has a lower z-index than the moveable box */
    max-width: 1000px; /* Maximum allowed width for the container */
    max-height: 600px; /* Maximum allowed height for the container */
    width: auto; /* Let JavaScript control the width */
    height: auto; /* Let JavaScript control the height */
}



.moveable-box {
    width: 100px;
    height: 100px;
    background-color: rgba(255, 255, 255, 0); /* Fully transparent */
    position: absolute; /* Position relative to the imageContainer */
    top: 20px; /* Position inside the imageContainer */
    left: 10px; /* Adjust as needed */
    border: 1px dashed #000; /* Retain the dashed border */
    z-index: 15; /* Higher z-index ensures it's above any content in the imageContainer */
}
        .input-group {
            margin: 10px 0; /* Space between input groups */
            display: flex; /* Use flexbox for horizontal arrangement */
            align-items: center; /* Align items vertically centered */
        }
        .input-group label {
            margin-right: 10px; /* Space between label and text boxes */
        }
        .input-group input {
            margin-right: 10px; /* Space between text boxes */
        }

        .draggable-line {
    position: absolute;
    top: 0;
    height: 100%;
    width: 5px;
    z-index: 10; /* Ensure they are above the image */
}

.line-text {
    position: absolute;
    top: -20px; /* Adjust to position text above the line */
    width: 100%;
    text-align: center;
    font-size: 14px;
    color: black;
}

    #chart-container {
      width: 90%;
      height: 90%;
      position: relative;
    }

    canvas {
      background-color: white;
    }

#draggable {
  position: absolute;
  width: 5px;
  height: 100%;
  background-color:#000;
  z-index: 10;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
}

#draggable i {
  font-size: 20px;
  color: white;
}

#tooltip {
  position: absolute;
  background-color: rgba(0, 0, 0, 0.75);
  color: white;
  padding: 5px;
  border-radius: 3px;
  font-size: 12px;
  display: none;
  z-index: 20;
  max-width: 350px;
}


    /* Modal styling */
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      padding-top: 100px;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
    }

    .modal-content {
      margin: auto;
      padding: 20px;
      background-color: white;
      border-radius: 10px;
      width: 50%;
      text-align: center;
    }

    .modal-content h2 {
      margin: 0 0 15px;
    }

    .close {
      color: #aaa;
      font-size: 28px;
      font-weight: bold;
      position: absolute;
      top: 10px;
      right: 20px;
      cursor: pointer;
    }

    .close:hover, .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }


/*    Table*/

button.deleteRowBtn {
    background-color: transparent;
    border: none;
    cursor: pointer;
    font-size: 16px;
}

button.deleteRowBtn:hover {
    color: red;
}


#dynamicTable {
    margin-top: 20px; /* Adds space between the chart and the table */
    border-collapse: collapse; /* For better table appearance */
    width: 80%; /* Set the desired width of the table */
    margin-left: auto; /* Automatically adjust the left margin */
    margin-right: auto; /* Automatically adjust the right margin */
    text-align: center; /* Center text within table cells */
    border: none;
}

#dynamicTable th, #dynamicTable td {
    padding: 8px;
    text-align: center; /* Centers text within table cells */
}

       .custom-file-upload {
        display: inline-block;
        padding: 6px 12px;
        cursor: pointer;
        background-color: #4CAF50;
        color: white;
        border-radius: 5px;
    }

    .custom-file-upload:hover {
        background-color: #45a049;
    }
/* Grow button CSS */
#calculateButton {
    max-width: 250px;
    background: red;
    color: white;
    border: 1px solid gray;
    border-radius: 2px;
    padding: 10px 15px;
    margin-bottom: 25px;
    cursor: pointer;
    box-shadow: 0 1px 2px 0 rgba(0,0,0,.2);
    transition: all 0.3s ease-in-out;
}

#calculateButton:hover {
    background: green;
    color: white;
    border: 1px solid green;
    transform: scale(0.9);
}


.grow-button {
    margin-left: 5%;
    background-color: gray;
    color: white;
    border: 1px solid gray;
    border-radius: 2px;
    padding: 10px 15px;
    margin-bottom: 25px;
    cursor: pointer;
    box-shadow: 0 1px 2px 0 rgba(0,0,0,.2);
    transition: all 0.3s ease-in-out;
}

.grow-button:hover {
    background-color: green;
    color: white;
    border: 1px solid green;
    transform: scale(1.1);
}


#addRowBtn {
    max-width: 250px;
    background-color: #4CAF50; /* Green */
    border: none;
    color: white;
    padding: 8px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 0; /* Adjusted to use margin top/bottom only */
    cursor: pointer;
}

#show_map {
    border: 1px solid orange; /* Add solid style to the border */
    font-family: Georgia;
    font-weight: bold;
    background-color: white; /* Set background to white */
    max-width: 250px;
    border-radius: 10px;
    padding: 8px 32px;
}

#video-container {
    position: fixed;
    bottom: 20px; /* Distance from the bottom */
    left: 20px; /* Distance from the left */
    z-index: 1000; /* Ensures the video is on top */
    cursor: move; /* Changes cursor to indicate drag capability */
    border: 2px solid #ccc; /* Optional: border for visibility */
    background-color: white; /* Optional: background color */
}

#close-button {
    position: absolute;
    top: 5px;
    right: 5px;
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: red; /* Optional: color for visibility */
    z-index: 1001; /* Ensure the button is on top */
}

#close-button:hover {
    color: darkred; /* Change color on hover */
}


    </style>

</head>
<body>



    <div id="video-container" class="draggable">
        <button id="close-button" title="Close" aria-label="Close video">‚úñ</button>
       <iframe width="560" height="315" src="https://www.youtube.com/embed/GnrGaMdH_-s?si=Ky-0Tro8FA5yf3Lp" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    </div>


      <!-- Welcome Modal -->
  <div id="welcomeModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>!IMPORTANT!</h3>
      <h2>Drag vertical Lines Right and Left to Measure Valuess.</h2>
    </div>
  </div>



     <div class="container">
    <div class="sidenav">
        

        <form id="uploadForm">
                <label for="imageInput" class="custom-file-upload"><i class="fa-solid fa-arrow-up-from-bracket"></i>
        Upload
    </label>
        <input type="file" id="imageInput" accept="image/*" required style="display: none;">
        <button type="submit" class="grow-button">Submit
        <i class="fa-solid fa-paper-plane"></i></button>
    </form>


    <div id="myinput_val" style="visibility: hidden;opacity: 0;transition: opacity 0.3s ease;">

        <div class="input-group">
        <label for="input1">x-axis:</label>
        <input type="text" id="input1" placeholder="x-minimum" >
        <input type="text" id="input2" placeholder="x-maximum" >
    </div>

            <div class="input-group">
        <label for="input3">Lat/Lon:</label>
        <input type="text" id="input3" placeholder="Latitude" >
        <input type="text" id="input4" placeholder="Longitude" >
    </div>

</div>


    <br>
<span id="displaytext"> </span>


    
 <div id="imageContainer">
    <div id="leftLine" class="draggable-line" style="position: absolute; left: 0; top: 0; height: 100%; width: 5px; background-color: red;"> 
        <span class="line-text left-text" style="font-weight: bold;">P</span> 
        <i class="fa-solid fa-hand-point-right" style="color: red; position: absolute; bottom: 0; left: 14px; transform: translateX(-50%);"></i>
    </div>


<div id="rightLine" class="draggable-line" style="position: absolute; right: 0; top: 0; height: 100%; width: 5px; background-color: blue;">
    <span class="line-text right-text" style="font-weight: bold;">S</span>  
    <i class="fa-solid fa-hand-point-left" style="color: red; position: absolute; bottom: 0; right: 4px;" ></i>
</div>



    <div id="imageContent" style="padding: 32px;"></div> <!-- Separate container for images -->
    <div class="moveable-box"></div> <!-- Moveable box remains here -->
</div>
    <!-- First Input Group -->
<br>
      <button id="calculateButton">Calculate Displacement
<i class="fa-solid fa-gear"></i>
      </button><br><br><hr>


<!--       <div>
<span id="displaytext">1) Upload Photo<br>2) Align  box to x-axis range<br>3) Enter x axis minimum and maximum<br>4) Calculate<br>5) Adjust sliders</span>
</div>
 -->


    </div>


    <div class="bgrnd">

                          <div id="chart-container">
    <div id="draggable">
  <i class="fa-solid fa-hand-pointer" style="font-size:24px;color:red"></i>
</div>
    <canvas id="myChart"></canvas>
    <div id="tooltip"></div>
  </div>


<button class="button" id="addRowBtn">
    <i class="fas fa-plus"></i> Add
</button>
    </div>
  </div>
 


<table id="dynamicTable" border="1" style="visibility: hidden;">
    <thead>
        <tr>
            <th>S.N</th>
            <th>Station</th>
            <th>Latitude</th>
            <th>Longitude</th>
            <th>P</th>
            <th>S</th>
            <th>P-S</th>
            <th>Distance</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        <!-- Table rows will be dynamically added here -->
    </tbody>
</table>
<button id="show_map">
  <i class="fa-solid fa-map"></i> View Map
</button>
    <script src="//daybrush.com/moveable/release/latest/dist/moveable.min.js"></script>
    <script>

$(document).ready(function() {
    $('#imageContent').append('<img src="myimg.png" alt="Description of image">');
});

            // Show the welcome modal when the app loads
    $(document).ready(function() {
      $('#welcomeModal').fadeIn();

      // Close modal when the close button is clicked
      $('.close').click(function() {
        $('#welcomeModal').fadeOut();
      });

      // Close modal when clicking outside of the modal content
      $(window).click(function(event) {
        if ($(event.target).is('#welcomeModal')) {
          $('#welcomeModal').fadeOut();
        }
      });
    });
          let x1, targetRange, originalRange,input1Value,input2Value;
          let time_difference,diff_p_s,fileInput,xValue_dist;
          let file_name;

    // Global flag to check if calculate button was clicked
   



document.getElementById('calculateButton').addEventListener('click', function() {

    input1Value = parseFloat(document.getElementById('input1').value);
    input2Value = parseFloat(document.getElementById('input2').value);


    fileInput = document.getElementById('imageInput').files[0];

    if (input1Value === '' || input2Value === '') {
        alert("Please enter both x-axis values.");
        return;
    }

    if (!fileInput) {
        alert("Please select an image file.");
        return;
    }

    if (!isNaN(input1Value) && !isNaN(input2Value)) {
        alert(`x-min = ${input1Value}, x-max = ${input2Value}`);
        document.querySelector('.moveable-box').style.pointerEvents = 'none';
        calculateClicked = true;

        const moveableBox = document.querySelector('.moveable-box');
        const moveableRect = moveableBox.getBoundingClientRect();
        const x2 = moveableRect.right;
        x1 = moveableRect.left;

        originalRange = x2 - x1;
        targetRange = Math.abs(input2Value - input1Value);

        // Print the values in console after calculation
        console.log("Input1 Value (After Calculate):", input1Value);
    } else {
        alert("Enter valid numeric values for both x-axis values.");
    }
});

        const uploadForm = document.getElementById('uploadForm');
        const imageInput = document.getElementById('imageInput');
        const imageContainer = document.getElementById('imageContainer');
        const moveableBox = document.querySelector('.moveable-box');

        // Initialize Moveable
        const moveable = new Moveable(document.body, {
            target: moveableBox,
            resizable: true,
            keepRatio: false,
            throttleResize: 1, // Throttle resize to prevent lag
            renderDirections: ["nw", "n", "ne", "w", "e", "sw", "s", "se"], // Enable resizing from all sides and corners
        });
;

        moveable.on('resize', ({ target, width, height, drag  }) => {
            target.style.width = `${width}px`;
            target.style.height = `${height}px`;
            target.style.transform = drag.transform;
        });


uploadForm.addEventListener('submit', function(event) {
    event.preventDefault();

        const fileInput = document.getElementById('imageInput');
    if (!fileInput.files || fileInput.files.length === 0) {
        alert('Please select a file.');
        return;
    }


  var secondDiv = document.getElementById("myinput_val");
if (secondDiv.style.visibility === "hidden" || secondDiv.style.visibility === "") {
    // Make the div visible by changing opacity and visibility
    secondDiv.style.visibility = "visible";
    secondDiv.style.opacity = "1";

}
    // Get the selected file
    const file = fileInput.files[0];

    // Set global file_name variable
    file_name = file.name.substring(0, file.name.lastIndexOf('.')) || file.name;

    // Rest of your file handling logic remains unchanged
const reader = new FileReader();
const img = new Image();
reader.onload = function(e) {
    const img = new Image();
    img.id = 'imageZoom'; // Add id for the image zoom plugin
    img.src = e.target.result;

    img.onload = function() {
        let width, height;
        const aspectRatio = img.width / img.height;

        // Set dimensions ensuring height is always smaller than width
        if (aspectRatio > 1) {
            // Landscape image (width > height)
            width = 768; // Set width to 768px
            height = width / aspectRatio; // Adjust height based on the image's aspect ratio
        } else {
            // Portrait or Square - adjust height to be smaller than width
            width = 768; // Set width to 768px
            height = width * 0.75; // Set height to 75% of the width
        }

        // Apply dimensions to the imageContainer
        imageContainer.style.width = `${width}px`;
        imageContainer.style.height = `${height}px`;

        // Apply the same dimensions to the image
        img.style.width = `${width}px`;
        img.style.height = `${height}px`;

        // Clear existing images, but leave the moveable box intact
        const imageContent = document.getElementById('imageContent');
        imageContent.innerHTML = ''; // Clear only image content

        // Append the img element directly to imageContent
        imageContent.appendChild(img);

        // Apply the image zoom plugin after the image is added
        $('#imageZoom').imageZoom({ zoom: 300 });
        };
    };

    reader.readAsDataURL(file);
    
});

let b_disp = null; // Declare globally
let r_disp = null; // Declare globally
let calculateClicked = false;


$(function() {
    let leftLine = $("#leftLine");
    let rightLine = $("#rightLine");

    leftLine.draggable({
        axis: "x",
        containment: "#imageContainer",
        drag: function(event, ui) {
            if (calculateClicked) {  // Only run if calculate button is clicked
                const xr = ui.position.left+55; // x position of red line
                
                // Prevent the left line from crossing the right line

                // Access x_disp calculation here
                r_disp = (xr - x1) * (targetRange / originalRange)+input1Value;
                

                // Update display text with P wave
                const displayText = document.getElementById('displaytext');

                diff_p_s = (r_disp !== null && b_disp !== null) ? Math.abs(r_disp - b_disp) : 0;
                displayText.innerText = `P wave: ${r_disp !== null ? r_disp.toFixed(2) : "N/A"}, S wave: ${b_disp !== null ? b_disp.toFixed(2) : "N/A"}, Time Difference: ${diff_p_s.toFixed(2)}`;

              
            }else{
                alert("Click Calculate Button")
            }
        }
    });

    // Right line draggable functionality
    rightLine.draggable({
        axis: "x",
        containment: "#imageContainer",
        drag: function(event, ui) {
            if (calculateClicked) {  // Only run if calculate button is clicked
                
                const xb = ui.position.left+55; // x position of blue line



                // Access b_disp calculation here
                b_disp = (xb - x1) * (targetRange / originalRange)+input1Value;
               
               

                // Update display text with P and S waves
                const displayText = document.getElementById('displaytext');
                       diff_p_s = (r_disp !== null && b_disp !== null) ? Math.abs(r_disp - b_disp) : 0;
                displayText.innerText = `P wave: ${r_disp !== null ? r_disp.toFixed(2) : "N/A"}, S wave: ${b_disp !== null ? b_disp.toFixed(2) : "N/A"}, Time Difference: ${diff_p_s.toFixed(2)}`;

          
            }else{
                alert("Click Calculate Button First")
            }
        }
    });
});

document.getElementById('imageInput').addEventListener('click', function() {
   // Clear any existing values of input1 and input2 when imageInput is clicked
   document.getElementById('input1').value = '';
   document.getElementById('input2').value = '';
      document.getElementById('input3').value = '';
   document.getElementById('input4').value = '';
      

});



// script for time travel

const circlePlugin = {
      id: 'circlePlugin',
      beforeDraw: function(chart) {
        const ctx = chart.ctx;
        if (chart.intersectionPoints) {
          // Draw circle for P
          ctx.beginPath();
          ctx.arc(chart.intersectionPoints.p.x, chart.intersectionPoints.p.y, 5, 0, 2 * Math.PI);
          ctx.fillStyle = 'black';
          ctx.fill();
          ctx.closePath();

          // Draw circle for S
          ctx.beginPath();
          ctx.arc(chart.intersectionPoints.s.x, chart.intersectionPoints.s.y, 5, 0, 2 * Math.PI);
          ctx.fillStyle = 'black';
          ctx.fill();
          ctx.closePath();
        }
      }
    };

  $(function() {
  $("#draggable").draggable({
    axis: "x",
    containment: "#myChart",
    drag: function(event, ui) {
      const canvas = document.getElementById('myChart');
      const rect = canvas.getBoundingClientRect();
      const xPos = ui.position.left;
      xValue_dist = myChart.scales.x.getValueForPixel(xPos);
      const pYValue = getYValueAtX(xValue_dist, myChart.data.datasets[0].data);
      const sYValue = getYValueAtX(xValue_dist, myChart.data.datasets[1].data);
      const pPixelPos = { x: xPos, y: myChart.scales.y.getPixelForValue(pYValue) };
      const sPixelPos = { x: xPos, y: myChart.scales.y.getPixelForValue(sYValue) };

      myChart.intersectionPoints = { p: pPixelPos, s: sPixelPos };
      myChart.update();

      time_difference = pYValue && sYValue ? (pYValue - sYValue) : null;

      // Move the tooltip along with the draggable element
      const tooltip = document.getElementById('tooltip');
      tooltip.innerHTML = `
        Distance: ${xValue_dist.toFixed(2)} km<br>
        P: ${pYValue ? pYValue.toFixed(2) : 'N/A'} min<br>
        S: ${sYValue ? sYValue.toFixed(2) : 'N/A'} min<br>
        Time: ${time_difference > 0 ? (time_difference / 60).toFixed(2) : 'N/A'} min<br>
        Time: ${time_difference ? time_difference.toFixed(2) : 'N/A'} sec
      `;
      tooltip.style.display = 'block';
      
      // Tooltip position exactly at the draggable element's location
      tooltip.style.left = `${ui.position.left}px`; // Match draggable X position
      tooltip.style.top = `${ui.position.top}px`;  // Match draggable Y position
    }
  });
});



    function getYValueAtX(x, data) {
      const point = data.find(p => p.x >= x);
      return point ? point.y : null;
    }

    function fetchJSONFile(filePath, callback) {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', filePath, true);
      xhr.responseType = 'json';
      xhr.onload = function() {
        if (xhr.status === 200) {
          callback(xhr.response);
        } else {
          console.error('Failed to load JSON file.');
        }
      };
      xhr.send();
    }

    function plotChart(jsonData) {
      const pData = jsonData.filter(item => item.p !== "").map(item => ({ x: item.x, y: item.p }));
      const sData = jsonData.filter(item => item.s !== "").map(item => ({ x: item.x, y: item.s }));

      const ctx = document.getElementById('myChart').getContext('2d');
      myChart = new Chart(ctx, {
        type: 'line',
        data: {
          datasets: [
            {
              label: 'p Values',
              data: pData,
              borderColor: 'blue',
              fill: false,
              tension: 0.1,
              pointRadius: 0,
              showLine: true
            },
            {
              label: 's Values',
              data: sData,
              borderColor: 'red',
              fill: false,
              tension: 0.1,
              pointRadius: 0,
              showLine: true
            }
          ]
        },
options: {
    scales: {
        x: {
            type: 'linear',
            position: 'bottom',
            min: 0,
            max: 10000,
            title: {
                display: true,
                text: 'Distance (km)'
            }
        },
        y: {
            min: 0, // Set the minimum value for the y-axis
            max: 1500, // Set the maximum value for the y-axis
            title: {
                display: true,
                text: 'Time (seconds)'
            }
        }
    }
},
        plugins: [circlePlugin]
      });
    }



// Initialize the row index
let rowIndex = 1;

// Add event listener to the "Add" button
document.getElementById('addRowBtn').addEventListener('click', function () {

  var dynamic_Table = document.getElementById("dynamicTable");
if (dynamic_Table.style.visibility === "hidden" || dynamic_Table.style.visibility === "") {
    // Make the div visible by changing opacity and visibility
    dynamic_Table.style.visibility = "visible";
    dynamic_Table.style.opacity = "1";

}
 

        val_lat = parseFloat(document.getElementById('input3').value);
    val_lon = parseFloat(document.getElementById('input4').value);
 

    


      if (!file_name || !val_lat || !val_lon || !b_disp || !r_disp || !time_difference || !xValue_dist) {
        console.log(b_disp,r_disp)
        alert('Please fill in all fields before adding a row.');
        return;
    }
 
    // Get table body element
    const tableBody = document.getElementById('dynamicTable').querySelector('tbody');

    // Create a new row
    const newRow = document.createElement('tr');

    // Add columns with input fields for editable values
    newRow.innerHTML = `
        <td>${rowIndex}</td>
        <td><input type="text" value="${file_name}" /></td>
        <td><input type="text" value="${val_lat}" /></td>
        <td><input type="text" value="${val_lon}" /></td>
        <td><input type="text" value="${(r_disp).toFixed(2)}m" /></td>
        <td><input type="text" value="${(b_disp).toFixed(2)}m" /></td>
        <td><input type="text" value="${(time_difference / 60).toFixed(2)}m" /></td>
        <td><input type="text" value="${(xValue_dist).toFixed(2)}km" /></td>
        <td><button class="deleteRowBtn">üóëÔ∏è</button></td>
    `;

    // Append the new row to the table body
    tableBody.appendChild(newRow);

    // Increment the row index
    rowIndex++;

    // Attach delete functionality to the newly added trash icon
    newRow.querySelector('.deleteRowBtn').addEventListener('click', function () {
        newRow.remove();
        updateRowIndices();  // Update row numbering after deletion
    });
});

// Function to update the S.N column after deletion
function updateRowIndices() {
    const rows = document.querySelectorAll('#dynamicTable tbody tr');
    rows.forEach((row, index) => {
        row.children[0].textContent = index + 1;  // Update the S.N column
    });
}

document.getElementById('show_map').addEventListener('click', function () {
    const locations = [];

    const rows = document.querySelectorAll('#dynamicTable tbody tr');
    rows.forEach(row => {
        const lat = parseFloat(row.children[2].querySelector('input').value);
        const lon = parseFloat(row.children[3].querySelector('input').value);
        const dist = parseFloat(row.children[7].querySelector('input').value); // Assuming xValue_dist is in the 8th column

        if (!isNaN(lat) && !isNaN(lon) && !isNaN(dist)) {
            locations.push({ lat, lon, dist });
        }
    });

    // Store the locations data in localStorage
    localStorage.setItem('locations', JSON.stringify(locations));

    // Navigate to the map page
    window.open('https://faraksoch1881.github.io/traveltime/earth.html', '_blank');
});



const videoContainer = document.getElementById('video-container');
const closeButton = document.getElementById('close-button');

// Function to remove the video container
closeButton.addEventListener('click', function () {
    videoContainer.style.display = 'none'; // Hide the video container
});




    fetchJSONFile('travel_time_curves.json', plotChart);
    </script>

    <script src="js/image-zoom.js" type="text/javascript"></script>
</body>
</html>
